{% extends "base.html" %}

{% block title %}
    DENKO
{% endblock %}

{% block header %}
    <div id="logo">Electricity forecast</div>
    <div id="welcome">
        {% if session["username"] %}
            Bienvenue {{ session["username"] }} <a href="./logout">logout</a>
        {% else %}
            Merci de vous connecter
        {% endif %}
    </div>
{% endblock %}

{% block content %}
    <div id="title_block">
        <div id="title">
            {% if session["username"] %}
                <h1>Production électrique française</h1>
            {% else %}
                <h1>Electricity Forecast</h1>
            {% endif %}
        </div>
    </div>
    <!-- <img src="{{url_for('static', filename='logo.jpg')}}" alt="logo de la société Denko"> -->
    <!-- <h1>Bienvenue sur Electricity Forecast</h1> -->
    {% if session["username"] %}
        <div id="chart">
            <canvas id="myChart" height="300"></canvas>
        </div>

        <div id="login_block">
            <div id="login">
                <form action="#" method="GET">
                    <div id="buttons_block">
                        <label for="total">
                            <input type="radio" name="source" id="total" value="total" checked>
                            Total
                        </label>
                        <label for="nuclear">
                            <input type="radio" name="source" id="nuclear" value="nuclear">
                            Nucléaire
                        </label>
                        <label for="enr">
                            <input type="radio" name="source" id="enr" value="enr">
                            EnR
                        </label>
                        <label for="enr">
                            <input type="radio" name="source" id="fossil" value="fossil">
                            Fossile
                        </label>
                    </div>
                </form>
            </div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <script>

            // Chart.defaults.global.responsive = false;
            Chart.defaults.scale.gridLines.display = false;
            Chart.defaults.global.defaultFontColor = 'white';

            var ctx = document.getElementById('myChart').getContext('2d');
            var chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'line',
        
                // The data for our dataset
                data: {
                    labels: [
                        {% for item in labels %}
                            "{{ item }}",
                        {% endfor %}
                    ],
                    datasets: [{
                        label: 'Confirmed values',
                        backgroundColor: 'rgb(52, 134, 235,0.2)',
                        borderColor: 'rgb(52, 134, 235)',
                        scaleShowLabels: true,
                        data: [
                            {% for item in values %}
                                {{ item }},
                            {% endfor %}
                            ]
                    },
                    {
                        label: 'Predictions',
                        backgroundColor: 'rgb(235, 92, 52, 0.2)',
                        borderColor: 'rgb(235, 92, 52)',
                        data: [
                            {% for item in predictions %}
                                {{ item }},
                            {% endfor %}
                        ]
                    },                    
                ]
            },

            // Configuration options go here
            options: {
                responsive:true,
                maintainAspectRatio:false,
            }
        });
        </script>
    {% else %}
        <div id="chart">
            <div id="myChart" height="300">
                <p>Bienvenue sur Electricity Forecast, votre site de prediction de production électrique.<br />
                Merci de vous authentitifier pour accéder a votre tableau de bord.</p>
            </div>
        </div>
        <div id="login_block">
            <div id="login">
                {% if error %}
                    <div id="error">
                       {{ error }}
                    </div>
                {% endif %}
                <form action="./" method="POST">
                    <input name="alias" type="text" class="alias" placeholder="Votre pseudo">
                    <input name="password" type="password" class="pass" placeholder="Votre mot de passe">
                    <button class="button" type="submit">Valider</button>
                </form>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block footer %}
    <p><a href="./">Retour à l'acceuil</a></p>
    <p>Votre pseudo et mot de passe vous ont été communiqués lors de votre inscription. Si vous avez perdu ou oubliez vos identifiants, merci de contacter nos équipes.</p>
    <p>Si vous souhaitez vous désabonner du service, modifier vos données personnelles ou les supprimer des bases de Denko, merci de clique <a href="#">ici</a> ou de contacter nos équipes à l'adresse <a href="mailto:team@denko_fr.com">team@denko_fr.com</a></p>
    <p><a href="#">Mentions légales</a><a href="#">Qui sommes nous ?</a></p>
{% endblock %}